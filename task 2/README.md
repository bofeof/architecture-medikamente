
### Целевая схема.  Privacy by Design

![Целевая архитектура по управлению потоков данных. Privacy by Design.](./c4_TO-BE.drawio.svg)


Краткие комментарии по нововведениям и предложениям:

* API Gateway - использовать как единую точку входа для управления трафиком и запросами от внешних и внутренних пользователей к сервисам.

* IAM - вынести управление доступом в отдельный сервис и внедрить ролевую/атрибутивную модель. Это позволит гибко контролировать права пользователей: например, аналитики и врачи не должны иметь одинаковый уровень доступа к чувствительным данным пациентов.

* Apache NiFi - ввести для сбора, маршрутизации, трансформации и управления потоками данных. Инструмент позволяет работать как со структурированными, так и с неструктурированными источниками (системы, файловые хранилища и др.).

* Apache Kafka - добавить в архитектуру для повышения отказоустойчивости и масштабируемости. NiFi будет выступать как продюсер и консюмер, обрабатывая чувствительные данные разных категорий.

* ACL + TLS в Kafka - настроить контроль доступа к данным между продюсерами и консюмерами через ACL, при этом обеспечить защищенную коммуникацию по TLS.

* Data Catalog - подключить для отслеживания lineage и фиксации метаданных, что повысит прозрачность и контроль за движением данных.

* 1С - перевести продукты с файлового на сетевой режим. Доступ к системе должен регулироваться через IAM и ролевую модель.

* Единый портал для клиентов и врачей - создать личные кабинеты, где пользователи смогут самостоятельно управлять данными и расписанием.

* Авторизация - только через IAM.

* Пациент видит исключительно свои записи и медицинские данные. Врач - только собственное расписание и сведения о записанных пациентах. Неавторизованным пользователям доступен лишь общий информационный сайт.

* Data Lakehouse - развивать как перспективное направление для хранения и анализа структурированных и неструктурированных данных. Это обеспечит поддержку BI-аналитики и ML-задач.