# architecture-medikament

### Целевая схема

![](./c4_TO-BE.drawio.svg)


Краткие комментарии по нововведениям и предложениям:

При потенциальном росте бизнеса, вся система должна быть масштабируемой и отказоусточивой. Рекомендуется отходить от работы в файловом режиме, функциональные блоки делить на сервисы и развивать МС архитектуру.

- Контроль трафика и запросов на самом верхнем уровне от заинтересованных сторон к сервисам продукта осуществлять через API Gateway.
- Для тонкой настроки и управления доступами к системам, вывести IAM и настроить ролевую\аттрибутивную модель. Ролевое разграничение продиктовано потребностями бизнеса, где не все группы могут иметь одинаковый доступ к ресурсам (см. работа с аналитикой, анализами, чувствительной информацией пациентов и тд.)
- Для сбора, маршрутизации, преобразований и управления потоками данных ввести Apache Nifi - инструмент может работать как со структурированными, так и не- данными (у бизнеса есть разнородные данные из систем, файловых хранилищ).
- Для улучшения управления потоками добавить связь с Kafka (повысится отказоусточивать, больше маневров для масштабируемости), где Apache NiFi будет выступать как продьюсер\консьюмер для работы с чувствительными данными разного уровня.
- Дополнительный контроль по доступу к данным между продьюсерами и консьюмерами на уровне Kafka осуществить через ACL. Вся коммуникация через TLS.
- Добавить дополнительный контроль данных через прослеживаемость - фиксировать метаданные в Data Catalog
- Перевести продукты 1С с файлового на сетевой режим работы. Доступ к системе по IAM, должно обеспечиваться соблюдение ролевой модели.
- Для клиентов и врачей сделать общий портал + ЛК, где пользователи и врачи сами могут управлять данными, расписанием, без привлечения регистратуры. Ролевой доступ также ограничен по RBAC\ABAC. Доступ в ЛК только авторизованным пользователям по IAM. Пациент видит только свои записи и медицинские данные. Врач видит только свое расписание и информацию по записанному клиенту. Если клиент не авторизован - для него доступен информационный сайт общего характера.
- В перспективе можно развивать Data Lakehouse, продолжать хранить структурированные и неструктурированные данные: хранилище покроет потребности в BI аналитике, ML